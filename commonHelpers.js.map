{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey =\n  'live_KMp19QzhJ8I3AYtoYghEXNrVMJ0hyUFwtzrQZM9zSgjtPw0LAitW0Eqio1Rvg0Np';\naxios.defaults.headers.common['x-api-key'] = apiKey;\n\nconst apiUrl = 'https://api.thecatapi.com/v1';\n\nexport async function fetchBreeds() {\n  return axios\n    .get(apiUrl + '/breeds')\n    .then(response => response.data)\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\nexport async function fetchCatByBreed(breedId) {\n  return axios\n    .get(`${apiUrl}/images/search?breed_ids=${breedId}`)\n    .then(response => response.data[0])\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst breedSelect = document.querySelector('#breed-select');\nconst loader = document.querySelector('.loader');\nconst catInfo = document.querySelector('.cat-info');\n\nnew SlimSelect({\n  select: breedSelect,\n  settings: {\n    placeholderText: 'Please, select a breed',\n    disabled: true,\n  },\n  events: {\n    afterChange: options => {\n      selectBreed(options[0].value);\n    },\n  },\n});\n\nloader.classList.remove('hidden');\n\nfetchBreeds()\n  .then(breeds => {\n    const options = breeds.map(breed => ({\n      text: breed.name,\n      value: breed.id,\n    }));\n\n    breedSelect.slim.setData([\n      {\n        text: 'Please, select a breed',\n        value: '',\n        disabled: true,\n      },\n      ...options,\n    ]);\n\n    breedSelect.slim.enable();\n    loader.classList.add('hidden');\n  })\n  .catch(error => {\n    loader.classList.add('hidden');\n    iziToast.error({\n      title: 'Error',\n      message: 'Cannot fetch data. Please, try again later.',\n      position: 'topRight',\n    });\n  });\n\nfunction selectBreed(breedId) {\n  catInfo.classList.add('hidden');\n\n  if (!breedId) {\n    return;\n  }\n\n  loader.classList.remove('hidden');\n\n  fetchCatByBreed(breedId)\n    .then(image => {\n      const breed = image.breeds[0];\n\n      document.querySelector('img.cat-info-image').src = image.url;\n      document.querySelector('.cat-info-title').textContent = breed.name;\n      document.querySelector('.cat-info-description').textContent =\n        breed.description;\n      document.querySelector('.cat-info-temperament').innerHTML =\n        '<strong>Temperament</strong>: ' + breed.temperament;\n\n      catInfo.classList.remove('hidden');\n      loader.classList.add('hidden');\n    })\n    .catch(error => {\n      loader.classList.add('hidden');\n      iziToast.error({\n        title: 'Error',\n        message: 'Cannot fetch data. Please, try again later.',\n        position: 'topRight',\n      });\n    });\n}\n"],"names":["apiKey","axios","apiUrl","fetchBreeds","response","error","fetchCatByBreed","breedId","breedSelect","loader","catInfo","SlimSelect","options","selectBreed","breeds","breed","iziToast","image"],"mappings":"owBAEA,MAAMA,EACJ,wEACFC,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAID,EAE7C,MAAME,EAAS,+BAER,eAAeC,GAAc,CAClC,OAAOF,EACJ,IAAIC,EAAS,SAAS,EACtB,KAAKE,GAAYA,EAAS,IAAI,EAC9B,MAAMC,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CAEO,eAAeC,EAAgBC,EAAS,CAC7C,OAAON,EACJ,IAAI,GAAGC,CAAM,4BAA4BK,CAAO,EAAE,EAClD,KAAKH,GAAYA,EAAS,KAAK,CAAC,CAAC,EACjC,MAAMC,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CClBA,MAAMG,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIC,EAAW,CACb,OAAQH,EACR,SAAU,CACR,gBAAiB,yBACjB,SAAU,EACX,EACD,OAAQ,CACN,YAAaI,GAAW,CACtBC,EAAYD,EAAQ,CAAC,EAAE,KAAK,CAC7B,CACF,CACH,CAAC,EAEDH,EAAO,UAAU,OAAO,QAAQ,EAEhCN,EAAa,EACV,KAAKW,GAAU,CACd,MAAMF,EAAUE,EAAO,IAAIC,IAAU,CACnC,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACd,EAAC,EAEFP,EAAY,KAAK,QAAQ,CACvB,CACE,KAAM,yBACN,MAAO,GACP,SAAU,EACX,EACD,GAAGI,CACT,CAAK,EAEDJ,EAAY,KAAK,SACjBC,EAAO,UAAU,IAAI,QAAQ,CACjC,CAAG,EACA,MAAMJ,GAAS,CACdI,EAAO,UAAU,IAAI,QAAQ,EAC7BO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8CACT,SAAU,UAChB,CAAK,CACL,CAAG,EAEH,SAASH,EAAYN,EAAS,CAC5BG,EAAQ,UAAU,IAAI,QAAQ,EAEzBH,IAILE,EAAO,UAAU,OAAO,QAAQ,EAEhCH,EAAgBC,CAAO,EACpB,KAAKU,GAAS,CACb,MAAMF,EAAQE,EAAM,OAAO,CAAC,EAE5B,SAAS,cAAc,oBAAoB,EAAE,IAAMA,EAAM,IACzD,SAAS,cAAc,iBAAiB,EAAE,YAAcF,EAAM,KAC9D,SAAS,cAAc,uBAAuB,EAAE,YAC9CA,EAAM,YACR,SAAS,cAAc,uBAAuB,EAAE,UAC9C,iCAAmCA,EAAM,YAE3CL,EAAQ,UAAU,OAAO,QAAQ,EACjCD,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,EACA,MAAMJ,GAAS,CACdI,EAAO,UAAU,IAAI,QAAQ,EAC7BO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8CACT,SAAU,UAClB,CAAO,CACP,CAAK,EACL"}